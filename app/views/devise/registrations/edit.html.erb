<link href="http://getbootstrap.com/assets/css/docs.min.css" rel="stylesheet">
<link href="/assets/main.css" rel="stylesheet">
<!--Middle content starts here-->
<section id="midd-container">
  <!--new volunteer section-->
  <div class="user-prf-sec">
    <div class="fixed-wrapper">
      <div class="inbox">
        <div class="corner3"></div>
        <h1>Profile Settings</h1>
      </div>
      <div class="user-prf-row1">
        <div class="user-prf-left">
          <%= form_for(resource, as: resource_name, url: registration_path(resource_name), html: { method: :put }) do |f| %>
            <div class="vol-img-lft">
              <div class="photoSettings">
                <li>
                  <% if current_user.image_file_name.present? %><%= image_tag current_user.image.url, style: "height: 150px;width: 150px;" %>
                  <% else %> <%= image_tag 'no-img.jpg', style: "height: 150px;width: 150px;" %>
                  <% end %>
                  <%= f.file_field :image, style: "height: 55px;" %></li>
              </div>
            </div>
            <div class="user-prf-left-cont">
              <div class="nameSettings"> <%= f.text_field :first_name, :required => true, :placeholder => "First Name" %> </div>
              <br/>

              <div class="city"><%= f.text_field :city, :required => true, :placeholder => "City" %></div>
              <div class="state"><%= f.text_field :state, :required => true, :placeholder => "State" %></div>
              <br/>

              <div class="description">
                <%= f.text_area :description, :placeholder => "Description", :required => true %>
              </div>
              <input type="button" value="Reset" class="reset-btn">
              <%= f.submit "Save" %>
            </div>
          <% end %>
        </div>
        <div class="user-prf-rgt"><strong>Volunteered:</strong>

          <p><span>300</span> times</p>

          <p><span>1000</span> hours</p><br/>

          <p><span>2136</span> Supporters </p>
        </div>
        <div class="foundCreate">
          <button>CREATE YOUR<br/>FOUNDATION PROFILE</button>
        </div>
      </div>
      <div class="user-photos-row">
        <ul>
          <div class="photoSettings">
            <li><img src="/assets/photoImg.jpg" alt="">
              <button>CHANGE PHOTO</button>
            </li>
          </div>
          <div class="photoSettings">
            <li><img src="/assets/photoImg.jpg" alt="">
              <button>CHANGE PHOTO</button>
            </li>
          </div>
          <div class="photoSettings">
            <li><img src="/assets/photoImg.jpg" alt="">
              <button>CHANGE PHOTO</button>
            </li>
          </div>
          <div class="photoSettings">
            <li><img src="/assets/photoImg.jpg" alt="">
              <button>CHANGE PHOTO</button>
            </li>
          </div>
        </ul>
      </div>
    </div>
  </div>
  <!--photo section ends-->

  <div class="volunteer-full float-full user-prf-vol">
    <div class="fixed-wrapper">
      <div id="volunteers">
        <div class="corner"></div>
        <h1>My Supporters</h1><br/>

        <div class="volBox">
          <% if @user_supporters.present? %>
            <% @user_supporters.in_groups_of(3, false) do |user_support| %>
              <% for user in user_support %>
                <div class="supporters">
                  <% if user.friend.present? && user.friend.image.present? %>
                    <%= image_tag user.friend.image.url(:medium), style: "height: 65px;" %>
                  <% else %>
                    <img src="/assets/noImg.jpg"/>
                  <% end %>
                  <%#= user.friend.present? && user.friend.image.present? ? image_tag user.friend.image.url(:medium), style: "height: 65px;"  : <img src="/assets/noImg.jpg"/> %>
                  <h2><%= user.friend.present? && user.friend.first_name.present? ? user.friend.first_name.capitalize : 'John Smith' %></h2>
                  <% if user.friend.present? %>
                    <%= button_to 'Remove', remove_friend_path(:friend_id => user.friend.id, :user_id => current_user.id), :method => :post, :class=>"remove-btn" %>
                  <% else %>
                    <a href="#"><button>REMOVE</button></a>
                  <% end %>
                </div>
              <% end %>
            <% end %>
        <% else %>
            <b><%= t(:no_supporter) %></b>
          <% end %>
        </div>
      </div>
    </div>
    <!--mysupporters section ends-->

    <div class="volunteer-full float-full user-prf-vol">
      <%= form_for(resource, as: resource_name, url: registration_path(resource_name), html: { method: :put }) do |f| %>
        <div class="fixed-wrapper">
          <div id="settings">
            <div class="corner"></div>
            <h1>Privacy Settings</h1><br/>

            <div class="privacyQuestion-left">
              <h2>Permissions:</h2>

              <h2>Can everyone view your profile?</h2>

              <h2>Can everyone view your calendar?</h2>

              <h2>Can everyone invite you to events?</h2>

              <h2>Can everyone view your posts?</h2>

              <h2>Can everyone message you?</h2>

              <h2>Do volunteers need approval to join your gigs?</h2>

              <h2>Do supporters need approval to comment on your posts?</h2>
            </div>
            <div class="switch2">
              <div>
                <%= f.check_box :everyone_view_your_calendar, :class => "form-control" %>
              </div>
              <div>
                <%= f.check_box :everyone_invite_you_to_events, :class => "form-control" %>
              </div>
              <div>
                <%= f.check_box :everyone_invite_you_to_events, :class => "form-control" %>
              </div>
              <div>
                <%= f.check_box :everyone_view_your_post, :class => "form-control" %>
              </div>
              <div>
                <%= f.check_box :everyone_message_you, :class => "form-control" %>
              </div>
              <div>
                <%= f.check_box :volunteers_need_approval_join_your_gigs, :class => "form-control" %>
              </div>
              <div>
                <%= f.check_box :supporters_need_approval_to_comment, :class => "form-control" %>
              </div>
            </div>
            <div class="privacyQuestion">
              <h3>Change your password:</h3>
              <%#= f.fields_for(resource, as: resource_name, url: registration_path(resource_name), html: { method: :put  }) do |ff| %>
              <%= devise_error_messages! %>
              <%= hidden_field_tag :reset_password_token %>
              <div class="passwordChange">
                <%= password_field_tag 'password', nil, :placeholder => "New Password" %>
                <%= password_field_tag 'password_confirmation', nil, :placeholder => "Confirm Password" %>
                <%= submit_tag "Save", :onclick => "return update_password();" %>
              </div>
              <%# end %>
            </div>
            <div class="notifications">
              <div class="notificationQuestion">
                <h2>Notifications:</h2>

                <div class="notificationSettings">
                  <%= f.email_field :email, :placeholder => "Email" %>
                </div>
                <h2>Email Notifications?</h2>

                <div class="notificationSettings">
                  <%= f.text_field :phone_number, :maxlength => "10", :pattern => "[0-9]{10}", :placeholder => "Phone" %>
                </div>
                <h2>Text/SMS Notifications?</h2>

                <h2>Would you like mobile ping notifications?</h2>
              </div>

              <div class="switch3">
                <div>
                  <%= f.check_box :email_notification, :class => "form-control" %>
                </div>
                <div>
                  <%= f.check_box :sms_notification %>
                </div>
                <div>
                  <%= f.check_box :mobile_ping_notifications %>
                </div>
              </div>
            </div>
          </div>
          <div class="fixed-wrapper">
            <div class="saveSettings">
              <!--<input type="submit" value="Save Privacy Settings">-->
              <%= f.submit "Save Privacy Settings" %>
              <input type="button" value="Reset Privacy Settings" class="reset-privacy-setting-btn">
            </div>
          </div>
        </div>
      <% end %>
    </div>
</section>
<!--Middle content ends here-->
<script>
	$(function (argument) {
		$('[type="checkbox"]').bootstrapSwitch();
	})
	$('.reset-btn').click(function () {
		$("input[type=text], textarea").val("");
	});
	$('.reset-privacy-setting-btn').click(function () {
		$('#user_supporters_need_approval_to_comment').attr('checked', 'checked');
		$("#user_email").val(" ");
	});
	function update_password() {
		if ($('#password').val() == '' || $('#password_confirmation').val() == '') {
			if ($('#password').val() != '' || $('#password_confirmation').val() != '')
				alert("Password & Confirm Password can't be blank");
		}
		else {
			if ($('#password').val() == $('#password_confirmation').val()) {
				$.ajax({
					type: 'post',
					url: '/registrations/update_password',
					data: {password: $('#password').val(), password_confirmation: $('#password_confirmation').val()}
				});
			}
			else {
				alert("Password & Confirm Password doesn't match");
			}
		}
		return false;
	}
</script>
<style>
	.photoSettings li #user_image {
		background-color: #67aa4d;
		border: 2px solid #fff;
		border-radius: 5px;
		color: #fff;
		font-family: "GothamRndMedium";
		font-size: 14px;
		margin-top: 5%;
		padding: 6px 5px 5px;
		position: relative;
		width: 100%;
	}

	#error_explanation h2 {
		display: none;
	}
</style>